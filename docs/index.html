<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jason" />

<meta name="date" content="2022-10-28" />

<title>House solar energy data analysis</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">House solar energy data analysis</h1>
<h4 class="author">Jason</h4>
<h4 class="date">2022-10-28</h4>

</div>


<div id="background" class="section level1">
<h1>Background</h1>
<p>This site provides analyses of solar energy production and household
consumption data for our 1.5 storey home in downtown Kelowna, British
Columbia.</p>
<p>Our system was supplied and installed by <a
href="https://www.oksolarhomes.com">Okanagan Solar</a>. Their team was
amazing to work with.</p>
<div id="the-solar-array" class="section level2">
<h2>The solar array</h2>
<p>In the summer of 2022 we had an array of thirty-six 360W panels
(model: Longi LR4-60HPB-360M) installed on our south-facing roof. The
entire array size is 12.96kW.</p>
<p>The layout of how the array is deployed on our roof is shown in the
following images (provided by Okanagan Solar as part of their
assessment):</p>
<p><img src="images/overhead_panels.png" style="width:25.0%" /></p>
<p><img src="images/angle_panels.png" style="width:25.0%" /></p>
</div>
<div id="electricity-supplier" class="section level2">
<h2>Electricity supplier</h2>
<p>Fortis BC is our electricity provider, and like most places in North
America, we don’t have a choice about who we purchase electricity
from.</p>
<p>As described at their <a
href="https://www.fortisbc.com/about-us/corporate-information/regulatory-affairs/our-electricity-utility/electric-bcuc-submissions/electricity-rates">website</a>,
Fortis bills customers bi-monthly, and uses a tiered charging system,
such that the first 1600kWh are charged at $0.12365/kWh, and $0.13713
for any kWh beyond that. They also charge a flat service fee of</p>
<p><strong>Net metering</strong></p>
<p>Fortis BC has a <a
href="https://www.fortisbc.com/services/electricity-services/generating-your-own-electricity/net-metering">net
metering program</a>, in which any energy produced by the solar array
that is not used immediately on site is put back into the grid. The
kicker is that Fortis only pays out $0.05/kWh for energy supplied to the
grid. This is half of what BC Hydro pays out. So if you’re wishing to
calculate what your return on investment would be for solar, be sure to
think about this, and have a look at the <a
href="https://www.bchydro.com/content/dam/BCHydro/customer-portal/documents/corporate/safety/bchydro-service-area-map.pdf">map
of BC</a> showing the distribution of electricity providers.</p>
</div>
<div id="household-electricity-demands" class="section level2">
<h2>Household electricity demands</h2>
<p>Our typical annual household energy consumption was about 10,000 kWh.
We’ll show the data for this in a bit…</p>
<p>Air conditioning is probably our biggest single electricity hog, but
we tend to only use it on the hottest and sunniest of days. This is of
course when solar production is highest also. We therefore expect to
save a considerable amount of money by powering our A/C using the solar
energy, at least during the daytime hours.</p>
</div>
</div>
<div id="lets-see-the-data" class="section level1">
<h1>Let’s see the data!</h1>
<div id="solar-energy-data" class="section level2">
<h2>Solar energy data</h2>
<p>I have another <a
href="https://github.com/pitherj/home_solar/blob/main/scripts/wrangle_solar_data.Rmd">script</a>
that imports the raw solar energy data files, downloaded from the <a
href="https://www.apsystemsema.com">AP Systems website</a>, and wrangles
them into an appropriate (tidy) format.</p>
<p>Here’s what the first few rows of the resulting data table looks
like:</p>
<pre class="r"><code>solar.data</code></pre>
<pre><code>## # A tibble: 1,547 × 4
##    date                day         hour    kWh
##    &lt;dttm&gt;              &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1 2022-07-08 04:00:00 2022-07-08     4  0.002
##  2 2022-07-08 05:00:00 2022-07-08     5  0.02 
##  3 2022-07-08 06:00:00 2022-07-08     6  0.009
##  4 2022-07-08 07:00:00 2022-07-08     7  1.49 
##  5 2022-07-08 08:00:00 2022-07-08     8  1.74 
##  6 2022-07-08 09:00:00 2022-07-08     9  5.65 
##  7 2022-07-08 10:00:00 2022-07-08    10  6.27 
##  8 2022-07-08 11:00:00 2022-07-08    11  9.59 
##  9 2022-07-08 12:00:00 2022-07-08    12 10.8  
## 10 2022-07-08 13:00:00 2022-07-08    13 10.7  
## # … with 1,537 more rows</code></pre>
<p>Let’s visualize the data to check for errors:</p>
<div class="figure">
<img src="index_files/figure-html/firstplot-1.png" alt="Figure 1: Hourly energy output (kWh) for the 36-panel solar array, starting July 8, 2022." width="672" />
<p class="caption">
Figure 1: Hourly energy output (kWh) for the 36-panel solar array,
starting July 8, 2022.
</p>
</div>
<p>Ah, we see a strange data point… investigating, this is a morning
when I took the datalogger offline. The system automatically sums up the
total kWh produced over the time period that it was offline.</p>
<pre><code>## # A tibble: 1 × 4
##   date                day         hour   kWh
##   &lt;dttm&gt;              &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 2022-08-30 14:00:00 2022-08-30    14  40.0</code></pre>
<p>So for that day (August 30, 2022), we won’t be able to use the hourly
data for analysis.</p>
<p>But we can sum up the total kWh by day, and plot:</p>
<div class="figure">
<img src="index_files/figure-html/secondplot-1.png" alt="Figure 2: Daily energy output (kWh) for the 36-panel solar array, starting July 8, 2022." width="672" />
<p class="caption">
Figure 2: Daily energy output (kWh) for the 36-panel solar array,
starting July 8, 2022.
</p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
